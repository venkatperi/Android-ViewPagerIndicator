apply plugin: 'android-library'
apply plugin: 'maven'
description = 'Android-ViewPagerIndicator'

dependencies {
  compile prop( 'appCompat' )
}

ext{
  artifactId  = "android-viewpagerindicator"
  artifactVersion  = prop('versionName')
  artifactVersionSuffix = ""
}

android {
  compileSdkVersion prop( "compileSdkVersion" )
  buildToolsVersion prop( "buildToolsVersion" )

  defaultConfig {
    minSdkVersion prop( "minSdkVersion" )
    targetSdkVersion prop( "targetSdkVersion" )
    versionCode prop( "versionCode" )
    versionName prop( "versionName" )
  }

  lintOptions {
    abortOnError prop( 'lintAbortOnError' )
  }

  compileOptions {
    encoding prop( 'encoding' )
    sourceCompatibility prop( "javaVersion" )
    targetCompatibility prop( "javaVersion" )
  }

  // signingConfigs {
  // release {
  // storeFile file(System.getenv('ANDROID_KEYSTORE_PATH'))
  // storePassword System.getenv('ANDROID_STORE_PASS')
  // keyAlias System.getenv('ANDROID_KEY_ALIAS')
  // keyPassword System.getenv('ANDROID_KEY_PASS')
  // }
  // }

  buildTypes {
    debug {
      packageNameSuffix prop( 'debugPackageNameSuffix' )
      runProguard prop( 'debugRunProGuard' )
    }

    release {
      // runProguard true
      // proguardFile '..\proguard.cfg'
      // signingConfig signingConfigs.release
      // zipAlign true // this is default for release
      // testPackageName 'com.cameraspice.android.masala.tests'
      // testInstrumentationRunner 'android.test.InstrumentationTestRunner' // this is the default
    }
  }
}

if ( hasProperty( 'ec2Nexus' ) ) {
  uploadArchives {
    repositories {
      mavenDeployer {
        pom {
          artifactId = project.artifactId
          version = project.artifactVersion
          packaging = "aar"
        }
        repository( url: ec2Nexus ) {
          authentication( userName: ec2NexusUsername, password: ec2NexusPassword )
        }
        snapshotRepository( url: ec2NexusSnapshots ) {
          authentication( userName: ec2NexusUsername, password: ec2NexusPassword )
        }
      }
    }
  }
}
